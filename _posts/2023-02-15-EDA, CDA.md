---
layout: single
title:  "EDA, CDA ê°„ë‹¨ ì •ë¦¬"
excerpt: "ë°ì´í„°ë¥¼ ì´í•´í•˜ê¸° ìœ„í•œ EDA, CDA ì •ë¦¬"
categories:
    - Aivle
tag: [Aivle, Data Analysis, EDA, CDA]

date: 2023-02-15 18:30:00 +0900
last_modified_at: 2023-02-15 18:30:00 +0900
---


# 0. ê°œìš”
KT Aivle Schoolì—ì„œ ë°°ìš´ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ EDA, CDAì— ëŒ€í•´ ì •ë¦¬í•˜ê¸°ìœ„í•œ í¬ìŠ¤íŠ¸ì´ë‹¤.


# 1. EDA, CDAë€?
**ë°ì´í„° ë¶„ì„ì„ ìœ„í•œ ë°©ë²•ìœ¼ë¡œ í¬ê²Œ ë‘ê°€ì§€ê°€ ì¡´ì¬.**
- **EDA (Exploratory Data Analysis)** : íƒìƒ‰ì  ë°ì´í„° ë¶„ì„
    - ê°œë³„ ë°ì´í„°ì˜ ë¶„í¬, ê°€ì„¤ì´ ë§ëŠ”ì§€ íŒŒì•…
    - NA, ì´ìƒì¹˜ íŒŒì•…
    - ê·¸ë˜í”„, í†µê³„ëŸ‰
- **CDA (Confirmatory Data Analysis)** : í™•ì¦ì  ë°ì´í„° ë¶„ì„
    - íƒìƒ‰ìœ¼ë¡œ íŒŒì•…í•˜ê¸° ì• ë§¤í•œ ì •ë³´ëŠ” í†µê³„ì  ë¶„ì„ ë„êµ¬(ê°€ì„¤ ê²€ì •) ì‚¬ìš©
    - ê°€ì„¤ê²€ì •, ì‹¤í—˜

    ë‘ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ë°ì´í„°ì™€ ë¹„ì¦ˆë‹ˆìŠ¤ì— ëŒ€í•´ ë” ì˜ ì´í•´ í•  ìˆ˜ ìˆë‹¤!!

**EDA ë° CDA ì§„í–‰ ìˆœì„œ**
- 1) ë‹¨ë³€ëŸ‰ ë¶„ì„ : ê°œë³„ ë³€ìˆ˜ì˜ ë¶„í¬
    - ex) íƒ€ì´íƒ€ë‹‰ íƒ‘ìŠ¹ê°ì˜ ë‚˜ì´ ë¶„ì„
- 2) ì´ë³€ëŸ‰ ë¶„ì„1 : featureì™€ target ê°„ì˜ ê´€ê³„ (ê°€ì„¤ì„ í™•ì¸í•˜ëŠ” ë‹¨ê³„)
    - ex) ê°ì‹¤ë“±ê¸‰ â†’ ìƒì¡´ì—¬ë¶€ (ê°ì‹¤ë“±ê¸‰ì— ë”°ë¼ ìƒì¡´ì—¬ë¶€ì— ì°¨ì´ê°€ ìˆë‚˜?)
- 3) ì´ë³€ëŸ‰ ë¶„ì„2 : featureë“¤ ê°„ì˜ ê´€ê³„

# 2. ë‹¨ë³€ëŸ‰ ë¶„ì„

||ê·¸ë˜í”„|í†µê³„ëŸ‰|
|---|---|---|
|ìˆ«ìí˜•|íˆìŠ¤í† ê·¸ë¨, KDE plot, box plot|min, max, mean, std, ì‚¬ë¶„ìœ„ìˆ˜|
|ë²”ì£¼í˜•|bar plot|ë²”ì£¼ë³„ ë¹ˆë„ìˆ˜, ë¹„ìœ¨|

## 1) ìˆ«ìí˜• ë³€ìˆ˜

**ìˆ«ìí˜• ë³€ìˆ˜ë¥¼ ì •ë¦¬í•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²•**

1. ìˆ«ìë¡œ ìš”ì•½í•˜ê¸° : ì •ë³´ì˜ ëŒ€í‘¯ê°’ â†’ **ê¸°ì´ˆ í†µê³„ëŸ‰**
    - í‰ê· (mean), ì¤‘ì•™ê°’(median), ìµœë¹ˆê°’(mode), ì‚¬ë¶„ìœ„ìˆ˜(quantile)..
    - `df.describe()`ë¡œ í•œ ë²ˆì— í™•ì¸ ê°€ëŠ¥

2. êµ¬ê°„ì„ ë‚˜ëˆ„ê³  ë¹ˆë„ìˆ˜(frequency) ê³„ì‚° â†’ **ë„ìˆ˜ë¶„í¬í‘œ**(frequency table)
    - Histogram
        - `plt.hist()` í˜¹ì€ `sns.histplot()`ìœ¼ë¡œ ì‹œê°í™” ê°€ëŠ¥
        - binsì— ë”°ë¼ ì „í˜€ ë‹¤ë¥¸ ëª¨ì–‘ì´ ë  ìˆ˜ ìˆìŒ
    - Density Plot (KDE Plot)
        - ë°€ë„í•¨ìˆ˜ ê·¸ë˜í”„
        - ë°€ë„í•¨ìˆ˜ ê·¸ë˜í”„ì˜ ì•„ë˜ ë©´ì ì€ 1
        - `sns.kdeplot()` í˜¹ì€ `sns.histplot(~~, kde=True)`ë¥¼ í†µí•´ Histogramê³¼ í•¨ê»˜ ì‹œê°í™” í•  ìˆ˜ ìˆìŒ

### (1) ì‹œê°í™”

#### [1] Histogram


```python
plt.subplot(2, 2, 1)
plt.hist(titanic['Fare'], bins=5, edgecolor='gray')
plt.xlabel('Fare')
plt.ylabel('Frequency')

plt.subplot(2, 2, 2)
plt.hist(titanic['Fare'], bins=20, edgecolor='gray')
plt.xlabel('Fare')
plt.ylabel('Frequency')

plt.subplot(2, 2, 3)
sns.histplot(x='Fare', data = titanic, bins=5)
plt.xlabel('Fare')
plt.ylabel('Frequency')

plt.subplot(2, 2, 4)
sns.histplot(x='Fare', data = titanic, bins=20)
plt.xlabel('Fare')
plt.ylabel('Frequency')

plt.tight_layout()
plt.show()
```


    
![png](https://user-images.githubusercontent.com/76936390/217501701-d2901809-488d-4a6f-bff3-1f89c8d6fc8a.png)
    


#### [2] ë°€ë„í•¨ìˆ˜ ê·¸ë˜í”„ (KDE Plot)


```python
plt.subplot(2, 1, 1)
sns.kdeplot(x='Fare', data = titanic)

plt.subplot(2, 1, 2)
sns.histplot(titanic['Age'], kde=True)

plt.show()
```


    
![png](https://user-images.githubusercontent.com/76936390/217501709-d3757c4f-9b65-4422-ac52-2dcb46244568.png)
    


#### [3] Boxplot
- `plt.boxplot()`ì€ ë°˜ë“œì‹œ NaNì„ ì œì™¸í•´ì•¼ ê²°ê³¼ê°€ ë‚˜ì˜´
- `sns.boxplot()`ì€ ì•Œì•„ì„œ ë¹¼ê³  ê·¸ë ¤ì¤Œ
- ê·¸ë¦¼ ì˜ë¯¸
<p align="left">
    <img src='https://user-images.githubusercontent.com/76936390/217498918-a0d76070-d5b7-4dac-872a-32f5d0242e51.png' alt="boxplot1">
</p>
<p align="left">
    <img src='https://user-images.githubusercontent.com/76936390/217498926-dfe0e6bf-fa1a-4584-bd62-ca83d6bb5086.png' alt="boxplot2">
</p>
<p align="left">
    <img src='https://user-images.githubusercontent.com/76936390/217498934-ce4a3ffd-a859-48dc-aeac-1a6f710f55b7.png' alt="boxplot3">
</p>


```python
plt.subplot(2, 2, 1)
plt.boxplot(temp['Age'])
plt.grid()

plt.subplot(2, 2, 2)
plt.boxplot(temp['Age'], vert = False)
plt.grid()

plt.subplot(2, 2, 3)
sns.boxplot(x = titanic['Age'])
plt.grid()

plt.subplot(2, 2, 4)
sns.boxplot(y = titanic['Age'])
plt.grid()

plt.tight_layout()
plt.show()
```


    
![png](https://user-images.githubusercontent.com/76936390/217501711-54bdf0e8-4ef8-4144-88ef-76e65c33bd18.png)
    


## 2) ë²”ì£¼í˜• ë³€ìˆ˜
- ë²”ì£¼ë³„ ê°œìˆ˜ë¥¼ ì„¸ë©´ ëœë‹¤! => ë²”ì£¼ë³„ ê°œìˆ˜, ë²”ì£¼ë³„ ë¹„ìœ¨

### (1) ìˆ˜ì¹˜í™” : ê¸°ì´ˆ í†µê³„ëŸ‰
- ë²”ì£¼ë³„ ë¹ˆë„ìˆ˜ì™€ ë¹„ìœ¨ì„ í™•ì¸
- ë²”ì£¼ë³„ ë¹ˆë„ìˆ˜ : `series.value_counts()`
- ë²”ì£¼ë³„ ë¹„ìœ¨ : `series.value_counts() / df.shape[0]`


```python
print(titanic['Embarked'].value_counts(), end='\n\n')
print(titanic['Embarked'].value_counts() / titanic.shape[0])
```

    Southhampton    644
    Cherbourg       168
    Queenstown       77
    Name: Embarked, dtype: int64
    
    Southhampton    0.722783
    Cherbourg       0.188552
    Queenstown      0.086420
    Name: Embarked, dtype: float64
    

### (2) ì‹œê°í™”
#### 1) bar chart
- seabornì˜ `sns.countplot()`
    - `plt.bar()`ë¥¼ ì´ìš©í•˜ë ¤ë©´ ë¨¼ì € ì§‘ê³„í•œ í›„ ê²°ê³¼ë¥¼ ê°€ì§€ê³  ê·¸ë˜í”„ë¥¼ ê·¸ë ¤ì•¼ í•¨
    - `sns.countplot()`ì€ ì§‘ê³„ + bar plot í•œ ë²ˆì— í•´ê²°


```python
plt.subplot(2, 1, 1)
sns.countplot(x = titanic['Pclass'])
plt.grid()

plt.subplot(2, 1, 2)
sns.countplot(y = titanic['Pclass'])
plt.grid()

plt.tight_layout()
plt.show()
```


    
![png](https://user-images.githubusercontent.com/76936390/217501715-deccc306-8d0b-4d36-a418-43736e76b6e8.png)
    

# 3. ì´ë³€ëŸ‰ ë¶„ì„1 (Y : ìˆ«ì)
**ì´ë³€ëŸ‰ ë¶„ì„ ì¢…ë¥˜ë³„ ì‹œê°í™”, ìˆ˜ì¹˜í™” ë°©ë²• ì •ë¦¬ í‘œ**

<p align="left">
    <img src='https://user-images.githubusercontent.com/76936390/218049111-f36476ec-f3b4-4ba9-b10b-f780a553761a.png'>
</p>

- ìš°ë¦¬ëŠ” ë‘ ë³€ìˆ˜ì™€ì˜ ê´€ê³„ë¥¼ ì‚´í´ë³´ê¸° ìœ„í•´, ë‘ ê°€ì§€ ë„êµ¬(ì‹œê°í™”, ìˆ˜ì¹˜í™”)ë¥¼ ì´ìš©í•œë‹¤.
- ëª¨ë“  ë„êµ¬ë“¤ì€ ë’·ë°›ì¹¨í•˜ëŠ” ê°€ì •(ì „ì œ)ì´ ìˆë‹¤.
- ë”°ë¼ì„œ í•œê³„ê°€ ìˆìœ¼ë¯€ë¡œ, ë³´ì´ëŠ”ê²Œ ì „ë¶€ê°€ ì•„ë‹˜!
- íŠ¹íˆ ìˆ˜ì¹˜í™” ë„êµ¬(ê°€ì„¤ê²€ì • ë„êµ¬)ëŠ” ë§ì€ ê°€ì •ì´ ì „ì œ ëœë‹¤.
- ì´ë²ˆ ê³¼ì •ì—ì„œëŠ” ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ëŠ”ë°ì— ì§‘ì¤‘í•œë‹¤.

## 1) ìˆ«ì â†’ ìˆ«ì (x â†’ Y)

### (1) ì •ë¦¬í•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²•

1. ì‚°ì ë„ (Scatter)
    - ê·¸ëŒ€ë¡œ ì ì„ ì°ì–´ì„œ ê·¸ë˜í”„ë¡œ ê·¸ë ¤ë³¸ë‹¤
    - ê°€ì¥ ì¤‘ìš”í•œ ê´€ì ì´ <span style='background-color: #fff5b1'>'ì§ì„ '(Linearity)</span>

2. ê³µë¶„ì‚°(Covariance), ìƒê´€ê³„ìˆ˜(Correlation efficient)
    - ê° ì ë“¤ì´ ì–¼ë§ˆë‚˜ <span style='background-color: #fff5b1'>ì§ì„ </span>ì— ëª¨ì—¬ ìˆëŠ”ì§€ë¥¼ ê³„ì‚°

**ê°•í•œê´€ê³„? ì•½í•œê´€ê³„?**
- ì–¼ë§ˆë‚˜ ì§ì„ ì— ëª¨ì—¬ ìˆëŠ”ê°€
- xì™€ Yì˜ ê´€ê³„ë¥¼ ì–¼ë§ˆë‚˜ ì§ì„ ìœ¼ë¡œ ì˜ ì„¤ëª…í•  ìˆ˜ ìˆëŠ”ê°€

### (2) ì‹œê°í™” : ì‚°ì ë„ (Scatter) (+ jointplot, regplot)

- `plt.scatter(x, y)` or `plt.scatter('xë³€ìˆ˜', 'yë³€ìˆ˜', data=df)`
- í•œ ë²ˆì— ì‚°ì ë„ ê·¸ë¦¬ê¸° : `sns.pairplot()`
    - ë‹¨ì  : ë³€ìˆ˜ì™€ ë°ì´í„°ê°€ ë§ë‹¤ë©´
        - ì‹œê°„ì´ ë§ì´ ê±¸ë¦¼
        - ì¼ì¼ì´ í™•ì¸í•˜ê¸° ì‰½ì§€ ì•ŠìŒ
- \+ `sns.jointplot`, `sns.regplot`ë„ ìˆìŒ


```python
plt.scatter(air['Temp'], air['Ozone'])
plt.show()
```


    
![output_3_0](https://user-images.githubusercontent.com/76936390/217802007-5a8e73b0-31f6-47d5-9487-3e4c75f3ea70.png)
    



```python
sns.pairplot(air)
plt.show()
```


    
![output_4_0](https://user-images.githubusercontent.com/76936390/217802050-8f6b3144-da9c-47ce-9454-db0d5c2f111c.png)
    
- `sns.jointplot`

```python
sns.jointplot(x='Temp', y='Ozone', data = air)
plt.show()
```


![](https://user-images.githubusercontent.com/76936390/218991818-9a4916e3-c39d-4304-8cbd-c0d2feba3912.png)


- `sns.regplot`

```python
sns.regplot(x='Solar.R', y='Ozone', data = air)
plt.show()
```

![](https://user-images.githubusercontent.com/76936390/218991835-811e5a8c-f276-4196-a280-ff388a5690a4.png)




### (3) ìˆ˜ì¹˜í™” : ìƒê´€ê³„ìˆ˜, ìƒê´€ë¶„ì„
- ëˆˆìœ¼ë¡œ ê·¸ë˜í”„ë¥¼ ì‚´í´ë³´ë©° ê´€ê³„ë¥¼ íŒŒì•…í•˜ëŠ” ê²ƒì€ ì‰½ì§€ ì•Šë‹¤!
- ë”°ë¼ì„œ, ê´€ê³„ë¥¼ ìˆ«ìë¡œ ê³„ì‚°í•´ì„œ ë¹„êµ
    - ì§ì„ ì˜ ê´€ê³„ë¥¼ ìˆ˜ì¹˜í™” â†’ <span style='background-color: #fff5b1'>ìƒê´€ê³„ìˆ˜(correlation coefficient)</span>
    - ìƒê´€ê³„ìˆ˜ê°€ ìœ ì˜ë¯¸í•œ ì§€ë¥¼ ê²€ì •(test) â†’ <span style='background-color: #fff5b1'>ìƒê´€ë¶„ì„</span>

#### [1] ìƒê´€ê³„ìˆ˜

**ìƒê´€ê³„ìˆ˜ëŠ” 'ğ‘Ÿ' í‘œí˜„ëœë‹¤.**
- -1 ~ 1 ì‚¬ì´ì˜ ê°’
- ìƒê´€ê³„ìˆ˜ë¼ë¦¬ ë¹„êµ ê°€ëŠ¥
- -1, 1ì— ê°€ê¹Œìš¸ ìˆ˜ë¡ ê°•í•œ ìƒê´€ê´€ê³„ë¥¼ ë‚˜íƒ€ëƒ„

**ê²½í—˜ì— ì˜í•œ ëŒ€ëµì˜ ê¸°ì¤€ (ì ˆëŒ€ì ì¸ ê¸°ì¤€ì´ ì ˆëŒ€ ì•„ë‹™ë‹ˆë‹¤.)**
- ê°•í•œ : 0.5<|ğ‘Ÿ|â‰¤1
- ì¤‘ê°„ : 0.2<|ğ‘Ÿ|â‰¤0.5
- ì•½í•œ : 0.1<|ğ‘Ÿ|â‰¤0.2
- (ê±°ì˜)ì—†ìŒ : |ğ‘Ÿ|â‰¤0.1

#### [2] P-value (ìœ ì˜í™•ë¥ )

- ê´€ê³„ë¥¼ ìˆ˜ì¹˜í™” í•œ ê°’(ìƒê´€ê³„ìˆ˜)ì´ <span style='background-color: #fff5b1'>ìœ ì˜ë¯¸í•œ ì§€ íŒë‹¨í•˜ëŠ” ìˆ«ì</span>
**íŒë‹¨ ê¸°ì¤€ (ìœ ì˜ ìˆ˜ì¤€)**
- P-value < 0.05 ì´ë©´, ë‘ ë³€ìˆ˜ ê°„ì— ê´€ê³„ê°€ ìˆë‹¤. (ìƒê´€ê³„ìˆ˜ê°€ ì˜ë¯¸ê°€ ìˆë‹¤.)
- P-value â‰¥ 0.05 ì´ë©´, ë‘ ë³€ìˆ˜ ê°„ì— ê´€ê³„ê°€ ì—†ë‹¤. (ìƒê´€ê³„ìˆ˜ê°€ ì˜ë¯¸ê°€ ì—†ë‹¤.)
- P-valueëŠ” 1ë³´ë‹¤ í´ ìˆ˜ ì—†ìŒ

#### [3] í•œê³„

ê³ ë ¤í•˜ì§€ ì•ŠëŠ” ë‘ê°€ì§€
1. ì§ì„ ì˜ ê¸°ìš¸ê¸°
2. ë¹„ì„ í˜• ê´€ê³„

<p align="left">
    <img src='https://user-images.githubusercontent.com/76936390/217782113-d2b0b4eb-23c8-4339-a1bd-c00069c1bf07.png' alt="corr1">
</p>
<p align="left">
    <img src='https://user-images.githubusercontent.com/76936390/217782120-a4965176-4269-4a4a-bbd9-d7dbd1ee15e9.png' alt="corr2">
</p>

#### [4] ì½”ë“œ ì‹¤ìŠµ
**spst.pearsonr**
- (í”¼ì–´ìŠ¨)ìƒê´€ë¶„ì„ í•¨ìˆ˜
- ì£¼ì˜ : NaNì´ ìˆìœ¼ë©´ ê³„ì‚°ë˜ì§€ ì•ŠìŒ
- ê²°ê³¼ : (ìƒê´€ê³„ìˆ˜, P-value)


```python
import scipy.stats as spst

spst.pearsonr(air['Temp'], air['Ozone'])
```




    (0.6833717861490116, 2.1977698002001775e-22)



**ë°ì´í„° í”„ë ˆì„ í•œêº¼ë²ˆì— ìƒê´€ê³„ìˆ˜ êµ¬í•˜ê¸°**
- `df.corr()`ì„ ì‚¬ìš©í•˜ë©´ ëª¨ë“  ìˆ«ìí˜• ë³€ìˆ˜ë“¤ ìƒí˜¸ê°„ì— ìƒê´€ê³„ìˆ˜ ê³„ì‚°


```python
air.corr()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Ozone</th>
      <th>Solar.R</th>
      <th>Wind</th>
      <th>Temp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Ozone</th>
      <td>1.000000</td>
      <td>0.280068</td>
      <td>-0.605478</td>
      <td>0.683372</td>
    </tr>
    <tr>
      <th>Solar.R</th>
      <td>0.280068</td>
      <td>1.000000</td>
      <td>-0.056792</td>
      <td>0.275840</td>
    </tr>
    <tr>
      <th>Wind</th>
      <td>-0.605478</td>
      <td>-0.056792</td>
      <td>1.000000</td>
      <td>-0.457988</td>
    </tr>
    <tr>
      <th>Temp</th>
      <td>0.683372</td>
      <td>0.275840</td>
      <td>-0.457988</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>



**ìƒê´€ê³„ìˆ˜ë¥¼ Heatmapìœ¼ë¡œ ì‹œê°í™”**


```python
plt.figure(figsize = (8, 8))
sns.heatmap(air.corr(), 
            annot = True,            # ìˆ«ì(ìƒê´€ê³„ìˆ˜) í‘œê¸° ì—¬ë¶€
            fmt = '.3f',             # ìˆ«ì í¬ë©§ : ì†Œìˆ˜ì  3ìë¦¬ê¹Œì§€ í‘œê¸°
            cmap = 'RdYlBu_r',       # ì¹¼ë¼ë§µ
            vmin = -1, vmax = 1)     # ê°’ì˜ ìµœì†Œ, ìµœëŒ€ê°’ê°’
plt.show()
```


    
![output_11_0](https://user-images.githubusercontent.com/76936390/217802055-3ccb2758-8729-4694-a738-048daf318e8b.png)
    


## 2) ë²”ì£¼ â†’ ìˆ«ì (x â†’ Y)
**ì‹œê°í™”**
- í‰ê·  ë¹„êµ barplot <span style='background-color: #fff5b1'>(`sns.barplot`) (`sns.countplot`ê³¼ `plt.bar`ì™€ëŠ” ë‹¤ë¥¸ ê²ƒì„!)</span>


**ìˆ˜ì¹˜í™”**
- ë²”ì£¼ê°€ 2ê°œ : ë‘ í‰ê· ì˜ ì°¨ì´ ë¹„êµ
- ë²”ì£¼ê°€ 3ê°œ ì´ìƒ : ì „ì²´ í‰ê· ê³¼ ê° ë²”ì£¼ì˜ í‰ê·  ë¹„êµ

### (1) ì‹œê°í™”
- í‰ê·  ê°’ì„ ë¹„êµí•˜ëŠ” barplot
- ì‹ ë¢°êµ¬ê°„(ì˜¤ì°¨ë²”ìœ„)
    - í‰ê· ê°’ì´ ì–¼ë§ˆë‚˜ ë¯¿ì„ ë§Œ í•œê°€?
    - ì¢ì„ ìˆ˜ë¡ ë¯¿ì„ ë§Œ í•˜ë‹¤.
    - ë°ì´í„°ê°€ ë§ì„ ìˆ˜ë¡, í¸ìê°€ ì ì„ ìˆ˜ë¡ ì‹ ë¢°êµ¬ê°„ì€ ì¢ì•„ì§„ë‹¤.
- `sns.barplot()`ìœ¼ë¡œ êµ¬í˜„ (`sns.countplot()`ê³¼ `plt.bar()`ì™€ëŠ” ë‹¤ë¥¸ ê²ƒì„!)


```python
plt.subplot(1, 3, 1)
sns.barplot(x="Survived", y="Age", data=titanic)
plt.grid()

plt.subplot(1, 3, 2)
sns.boxplot(x='Survived', y = 'Age', data = titanic)
plt.grid()

plt.subplot(1, 3, 3)
sns.barplot(x='Pclass', y='Age', data=titanic)
plt.grid()

plt.tight_layout()
plt.show()
```


    
![output_13_0](https://user-images.githubusercontent.com/76936390/217802058-0411abcd-241f-4484-b356-30a2abde4857.png)
    


### (2) ìˆ˜ì¹˜í™” : t-test, ANOVA(ë¶„ì‚°ë¶„ì„)
- ë²”ì£¼ê°€ 2ê°œì¼ ë•Œì™€ 3ê°œ ì´ìƒì¼ ë•Œ í‰ê· ì„ ë¹„êµí•˜ëŠ” ë°©ë²•ì´ ì¡°ê¸ˆ ë‹¬ë¼ì§
- t-testì™€ anova ë‘˜ ë‹¤ ë²”ì£¼í˜• xì™€ ìˆ«ìí˜• Yì˜ ê´€ê³„ë¥¼ ê²€ì •í•˜ê¸° ìœ„í•œ ë„êµ¬
- ë˜í•œ, í‰ê· ì„ ë¹„êµí•˜ì—¬ ì°¨ì´ë¥¼ ê²€ì •(test) í•œë‹¤.

#### [1] t-test
- ë²”ì£¼ì˜ ìˆ˜ê°€ <span style='background-color: #fff5b1'>2ê°œ</span>ì¼ ë•Œ ì‚¬ìš©
- ë‘ ê·¸ë£¹ê°„ í‰ê· ì— ì°¨ì´ê°€ ìˆëŠ”ê°€?
- t í†µê³„ëŸ‰
    - ë‘ ê·¸ë£¹ì˜ í‰ê·  ê°„ ì°¨ì´ë¥¼ í‘œì¤€ì˜¤ì°¨ë¡œ ë‚˜ëˆˆ ê°’
    - <span style='background-color: #fff5b1'>ë‘ í‰ê· ì˜ ì°¨ì´</span>ë¡œ ì´í•´í•´ë„ ì¢‹ë‹¤.
- t í†µê³„ëŸ‰ì´ ìœ ì˜í•œì§€ ê²€ì •
    - t-testë¥¼ ìˆ˜í–‰í•˜ë©´, t í†µê³„ëŸ‰ê³¼ P-valueë¥¼ êµ¬í•  ìˆ˜ ìˆë‹¤.
    - P-valueê°€ 0.05 ë³´ë‹¤ ì‘ìœ¼ë©´ ì°¨ì´ê°€ ì—†ë‹¤.
    - t í†µê³„ëŸ‰ì´ -2ë³´ë‹¤ ì‘ê±°ë‚˜, 2ë³´ë‹¤ í¬ë©´, ì°¨ì´ê°€ ìˆë‹¤ê³  ë³¸ë‹¤.
- `spst.ttest_ind(B, A)`ë¡œ êµ¬í˜„
    - Aì™€ ë¹„êµí•  ë•Œ Bì˜ í‰ê· ì´ í°ê°€?


```python
# NaN í–‰ ì œì™¸
temp = titanic.loc[titanic['Age'].notnull()]

# ë‘ ê·¸ë£¹ìœ¼ë¡œ ë°ì´í„° ì €ì¥
died = temp.loc[temp['Survived']==0, 'Age']
survived = temp.loc[temp['Survived']==1, 'Age']

spst.ttest_ind(died, survived)
```




    Ttest_indResult(statistic=2.06668694625381, pvalue=0.03912465401348249)



#### [2] ANOVA(ë¶„ì‚°ë¶„ì„)
- **AN**alysis **O**f **VA**riance
- 3ê°œ ì´ìƒ ë²”ì£¼ì˜ ìˆ«ì ë¹„êµ
- ì „ì²´ í‰ê· ê³¼ ê° ê·¸ë£¹ í‰ê· ì— ì°¨ì´ê°€ ìˆëŠ”ê°€?
- ğ¹ í†µê³„ëŸ‰ = $$\frac{\text{ì§‘ë‹¨ ê°„ ë¶„ì‚°}}{\text{ì§‘ë‹¨ ë‚´ ë¶„ì‚°}} = \frac{\text{ì „ì²´ í‰ê·  - ê° ì§‘ë‹¨ í‰ê· }}{\text{ê° ì§‘ë‹¨ì˜ í‰ê·  - ê°œë³„ ê°’}}$$
    - ê°’ì´ ëŒ€ëµ 2~3 ì´ìƒì´ë©´ ì°¨ì´ê°€ ìˆë‹¤ê³  íŒë‹¨í•©ë‹ˆë‹¤.

<p align="left">
    <img src='https://user-images.githubusercontent.com/76936390/217799679-ccfa2254-21c2-4def-8e99-e265c7bffd86.png' alt="anova">
</p>

- ì£¼ì˜!
    - ë¶„ì‚° ë¶„ì„ì€ ì „ì²´ í‰ê· ëŒ€ë¹„ ê° ê·¸ë£¹ê°„ ì°¨ì´ê°€ ìˆëŠ” ì§€ë§Œ ì•Œë ¤ì¤Œ. ì–´ëŠ ê·¸ë£¹ ê°„ì— ì°¨ì´ê°€ ìˆëŠ”ì§€ëŠ” ì•Œ ìˆ˜ ì—†ë‹¤.
    - ê·¸ë˜ì„œ, ë³´í†µ [ì‚¬í›„ë¶„ì„]ì„ ì§„í–‰í•¨
- `spst.f_oneway(A, B, C)` ë¡œ êµ¬í˜„
    - ì „ì²´ í‰ê· ê³¼ A, B, C ê°ê°ì˜ í‰ê· ì€ ì°¨ì´ê°€ ìˆëŠ”ê°€?


```python
# NaN í–‰ ì œì™¸
temp = titanic.loc[titanic['Age'].notnull()]
# ê·¸ë£¹ë³„ ì €ì¥
P_1 = temp.loc[temp.Pclass == 1, 'Age']
P_2 = temp.loc[temp.Pclass == 2, 'Age']
P_3 = temp.loc[temp.Pclass == 3, 'Age']

spst.f_oneway(P_1, P_2, P_3)
```




    F_onewayResult(statistic=57.443484340676214, pvalue=7.487984171959904e-24)



# 4. ì´ë³€ëŸ‰ ë¶„ì„2 (Y : ë²”ì£¼)

## 1) ì´ë³€ëŸ‰ ë¶„ì„(ë²”ì£¼ â†’ ë²”ì£¼)

### (1) êµì°¨í‘œ (`pd.crosstab()`)
- ë²”ì£¼ vs ë²”ì£¼ë¥¼ ë¹„êµí•˜ê³  ë¶„ì„í•˜ê¸° ìœ„í•´ì„œëŠ” ë¨¼ì € **êµì°¨í‘œ**ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.
- `pd.crosstab(í–‰, ì—´)`ìœ¼ë¡œ ìƒì„±
- normalize ì˜µì…˜ : ë¹„ìœ¨ë¡œ ë³€í™˜
    - columns : ì—´ ê¸°ì¤€ 100%
    - index : í–‰ ê¸°ì¤€ 100%
    - all : ì „ì²´ ê¸°ì¤€ 100%


```python
pd.crosstab(titanic['Survived'], titanic['Sex'])
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Sex</th>
      <th>female</th>
      <th>male</th>
    </tr>
    <tr>
      <th>Survived</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>81</td>
      <td>468</td>
    </tr>
    <tr>
      <th>1</th>
      <td>233</td>
      <td>109</td>
    </tr>
  </tbody>
</table>
</div>




```python
pd.crosstab(titanic['Survived'], titanic['Sex'], normalize = 'columns')
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Sex</th>
      <th>female</th>
      <th>male</th>
    </tr>
    <tr>
      <th>Survived</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.257962</td>
      <td>0.811092</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.742038</td>
      <td>0.188908</td>
    </tr>
  </tbody>
</table>
</div>




```python
pd.crosstab(titanic['Survived'], titanic['Sex'], normalize = 'index')
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Sex</th>
      <th>female</th>
      <th>male</th>
    </tr>
    <tr>
      <th>Survived</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.147541</td>
      <td>0.852459</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.681287</td>
      <td>0.318713</td>
    </tr>
  </tbody>
</table>
</div>



### (2) ì‹œê°í™” (mosaic plot, 100% Stacked Bar)
- mosaic plotì€ ë²”ì£¼ë³„ ì–‘ê³¼ ë¹„ìœ¨ì„ ê·¸ë˜í”„ë¡œ ë‚˜íƒ€ë‚´ ì¤€ë‹¤.
- `from statsmodels.graphics.mosaicplot import mosaic`
- ë²”ì£¼í˜• ë³€ìˆ˜ê°€ ì•„ë¬´ëŸ° ìƒê´€ì´ ì—†ë‹¤ë©´
    - ë²”ì£¼ ë³„ ë¹„ìœ¨ì˜ ì°¨ì´ê°€ ì „í˜€ ì—†ëŠ” ìƒíƒœê°€ ë¨
    - ì¡°ê¸ˆì´ë¼ë„ ê´€ë ¨ì´ ìˆë‹¤ë©´, ë¹„ìœ¨ í˜¹ì€ barì˜ í¬ê¸°ì— ì¡°ê¸ˆì´ë¼ë„ ì°¨ì´ê°€ ë‚œë‹¤.

<p align='left'>
    <img src='https://user-images.githubusercontent.com/76936390/218052542-f4b51e15-f541-43de-901e-90c71e4f2e8f.png' alt='mosaic'>
</p>


```python
mosaic(titanic, [ 'Pclass','Survived'])
plt.axhline(1- titanic['Survived'].mean(), color = 'r') # ì „ì²´ í‰ê·  ë¹„ìœ¨
plt.show()
```


    
![output_7_0](https://user-images.githubusercontent.com/76936390/218073301-733dca83-2ad4-47ab-a0da-ed3e1eec7464.png)
    


**ì¶”ê°€) 100% Stacked Bar**
- ë¨¼ì € crosstabìœ¼ë¡œ ì§‘ê³„ : `pd.crosstabl(feature, target, normalize='index')`
- `.plot.bar(stacked=true)`
- ì „ì²´ í‰ê· ì„  : `plt.axhline()`


```python
temp = pd.crosstab(titanic['Pclass'], titanic['Survived'], normalize = 'index')
print(temp)
temp.plot.bar(stacked=True)
plt.axhline(1-titanic['Survived'].mean(), color = 'r')
plt.show()
```

    Survived         0         1
    Pclass                      
    1         0.370370  0.629630
    2         0.527174  0.472826
    3         0.757637  0.242363
    


    
![output_9_1](https://user-images.githubusercontent.com/76936390/218073302-abc97157-2f14-49f5-9976-7d4a21cb68a0.png)
    


### (3) ìˆ˜ì¹˜í™” (ì¹´ì´ì œê³±ê²€ì •)
- **ì¹´ì´ì œê³±ê²€ì •** : ë²”ì£¼í˜• ë³€ìˆ˜ë“¤ ì‚¬ì´ì— ì–´ë–¤ ê´€ê³„ê°€ ìˆëŠ”ì§€ ìˆ˜ì¹˜í™” í•˜ëŠ” ë°©ë²•
<p align='left'>
    <img src='https://user-images.githubusercontent.com/76936390/218067548-6b11506e-88c3-4670-a4fe-ecdb3491560e.png' alt='chi_eq'>
</p>

    - ê¸°ëŒ€ë¹ˆë„ : ì•„ë¬´ëŸ° ê´€ë ¨ì´ ì—†ì„ ë–„ ë‚˜ì˜¬ ìˆ˜ ìˆëŠ” ë¹ˆë„
    - ì‹¤ì œ ë°ì´í„° : ê´€ì¸¡ëœ ê°’ë“¤
- **ì¹´ì´ì œê³± í†µê³„ëŸ‰**ì€
    - ê¸°ëŒ€ë¹ˆë„ì™€ ì‹¤ì œ ë°ì´í„°ì˜ ì°¨ì´
    - í´ìˆ˜ë¡ ê¸°ëŒ€ë¹ˆë„ë¡œë¶€í„° ì‹¤ì œ ê°’ì— ì°¨ì´ê°€ í¬ë‹¤!
    - ë²”ì£¼ì˜ ìˆ˜ê°€ ëŠ˜ì–´ë‚  ìˆ˜ë¡ ê°’ì€ ì»¤ì§€ê²Œ ë˜ì–´ìˆìŒ
    - ììœ ë„ì˜ ì•½ 2ë°°ë³´ë‹¤ í¬ë©´, ì°¨ì´ê°€ ìˆë‹¤ê³  ë³¸ë‹¤.

**ììœ ë„ ê°„ë‹¨ ì„¤ëª…**
- ë²”ì£¼ì˜ ìˆ˜ -1
- ì¹´ì´ì œê³± ê²€ì •ì—ì„œ ììœ ë„ ê³„ì‚°
    - ex) Pclass â†’ Survived
        - Pclass ë²”ì£¼ 3ê°œ, Survived ë²”ì£¼ 2ê°œ
        - (3-1) * (2-1) = 2

- **ì¹´ì´ì œê³± ê²€ì • ìˆ˜í–‰**
    - ë¨¼ì € Crosstab ì§‘ê³„
        - ì£¼ì˜! Normalize ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ì•ˆë¨
    - ì¹´ì´ì œê³± ê²€ì • ìˆ˜í–‰
    - ê²°ê³¼
        1. ì¹´ì´ì œê³± í†µê³„ëŸ‰
        2. P-value
        3. ììœ ë„
        4. ê¸°ëŒ€ë¹ˆë„ : ê³„ì‚°ëœ ê°’


```python
# 1) ë¨¼ì € êµì°¨í‘œ ì§‘ê³„
table = pd.crosstab(titanic['Survived'], titanic['Pclass'])
print(table)
print('-' * 50)

# 2) ì¹´ì´ì œê³±ê²€ì •
spst.chi2_contingency(table)
```

    Pclass      1   2    3
    Survived              
    0          80  97  372
    1         136  87  119
    --------------------------------------------------
    
    (102.88898875696056,
     4.549251711298793e-23,
     2,
     array([[133.09090909, 113.37373737, 302.53535354],
            [ 82.90909091,  70.62626263, 188.46464646]]))



## 2) ì´ë³€ëŸ‰ ë¶„ì„(ìˆ«ì â†’ ë²”ì£¼)

### (1) ì‹œê°í™” (sns.kdeplot)
- titanicì—ì„œ 'Age' â†’ 'Survived' ì˜ˆì‹œ

#### [1] kdeplot(, hue='Survived')
- common_norm = True (ê¸°ë³¸ê°’)
    - ê° ë©´ì ì˜ í•©ì´ ë¹„ìœ¨ (ex: 0.7, 0.3)


```python
sns.kdeplot(x='Age', data = titanic, hue ='Survived')
plt.show()
```


    
![output_13_0](https://user-images.githubusercontent.com/76936390/218073322-4bbe19a4-4397-457b-bc6c-9bfe4e305876.png)
    


#### [2] kdeplot(, hue='Survived', common_norm=False)
- common_norm = False 
    - ê° ë©´ì ì˜ í•©ì´ 1


```python
sns.kdeplot(x='Age', data = titanic, hue ='Survived', common_norm = False)
plt.show()
```


    
![output_15_0](https://user-images.githubusercontent.com/76936390/218073326-63573bf6-e29d-4b7d-8d0f-728d4781c665.png)
    


#### [3] muliple = 'fill' ì˜µì…˜


```python
sns.kdeplot(x='Age', data = titanic, hue ='Survived', multiple = 'fill')
plt.axhline(titanic['Survived'].mean(), color = 'r')
plt.show()
```


    
![output_17_0](https://user-images.githubusercontent.com/76936390/218073333-888a665b-b081-4371-be2a-88e261b645e5.png)
    


#### [4] histplot


```python
sns.histplot(x='Age', data = titanic, bins = 16, hue ='Survived', multiple = 'fill')
plt.axhline(titanic['Survived'].mean(), color = 'r')
plt.show()
```


    
![output_19_0](https://user-images.githubusercontent.com/76936390/218073334-ae2e59f5-1c2a-407b-b9de-70a42944575c.png)
    


### (2) ìˆ˜ì¹˜í™”
- ìˆ«ì â†’ ë²”ì£¼ ì¼ ë•Œ, ë”± ë–¨ì–´ì§€ëŠ” ê²€ì •ë²•ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŒ
- ë”°ë¼ì„œ
    1. xë¥¼ ë²”ì£¼ë¡œ ë³€í™˜
        - ì¹´ì´ì œê³±
    2. Yë¥¼ ìˆ«ìë¡œ ë³€í™˜
        - ìƒê´€ë¶„ì„
    3. ë¡œì§€ìŠ¤í‹±íšŒê·€
        - íšŒê·€ê³„ìˆ˜, P-value
